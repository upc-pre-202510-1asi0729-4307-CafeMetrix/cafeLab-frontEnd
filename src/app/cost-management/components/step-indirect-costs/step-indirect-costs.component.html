<h2>Costos indirectos</h2>

<form [formGroup]="formGroup" class="step-form">

  <!-- Transporte -->
  <fieldset>
    <legend>Costos de transporte</legend>
    <div [formGroup]="transportForm">
      <label>
        Costo por kg:
        <input matInput type="number" formControlName="costPerKg" />
      </label>
      <label>
        Cantidad:
        <input matInput type="number" formControlName="quantity" />
      </label>
      <p><strong>Total:</strong> {{ transportTotal | currency: 'PEN' }}</p>
    </div>
  </fieldset>

  <!-- Almacenamiento -->
  <fieldset>
    <legend>Costos de almacenamiento</legend>
    <div [formGroup]="storageForm">
      <label>
        Días en almacenamiento:
        <input matInput type="number" formControlName="daysInStorage" />
      </label>
      <label>
        Costo diario:
        <input matInput type="number" formControlName="dailyCost" />
      </label>
      <p><strong>Total:</strong> {{ storageTotal | currency: 'PEN' }}</p>
    </div>
  </fieldset>

  <!-- Procesamiento -->
  <fieldset>
    <legend>Costos de procesamiento</legend>
    <div [formGroup]="processingForm">
      <label>
        Electricidad:
        <input matInput type="number" formControlName="electricity" />
      </label>
      <label>
        Mantenimiento:
        <input matInput type="number" formControlName="maintenance" />
      </label>
      <label>
        Suministros:
        <input matInput type="number" formControlName="supplies" />
      </label>
      <label>
        Agua:
        <input matInput type="number" formControlName="water" />
      </label>
      <label>
        Depreciación:
        <input matInput type="number" formControlName="depreciation" />
      </label>
      <p><strong>Total:</strong> {{ processingTotal | currency: 'PEN' }}</p>
    </div>
  </fieldset>

  <!-- Otros -->
  <fieldset>
    <legend>Otros costos indirectos</legend>
    <div [formGroup]="othersForm">
      <label>
        Control de calidad:
        <input matInput type="number" formControlName="qualityControl" />
      </label>
      <label>
        Certificaciones:
        <input matInput type="number" formControlName="certifications" />
      </label>
      <label>
        Seguro:
        <input matInput type="number" formControlName="insurance" />
      </label>
      <label>
        Costos administrativos:
        <input matInput type="number" formControlName="administrative" />
      </label>
      <p><strong>Total:</strong> {{ othersTotal | currency: 'PEN' }}</p>
    </div>
  </fieldset>

  <!-- Acciones -->
  <div class="button-container">
    <button mat-stroked-button color="warn" (click)="onCancel()">
      Cancelar
    </button>
    <button mat-raised-button color="primary" [disabled]="formGroup.invalid" matStepperNext>
      Continuar
    </button>
  </div>

</form>
