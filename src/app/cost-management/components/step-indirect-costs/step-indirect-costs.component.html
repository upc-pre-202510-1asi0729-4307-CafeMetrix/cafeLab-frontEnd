<div class="step-container">
  <h2>Costos Indirectos</h2>

  <div class="cards-grid">
    <!-- Card 1: Transporte -->
    <mat-card>
      <mat-card-title>Costos de Transporte</mat-card-title>
      <mat-card-content>
        <mat-form-field appearance="outline">
          <mat-label>Costo por kg de café verde</mat-label>
          <input matInput type="number" formControlName="costPerKg">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Cantidad de café verde</mat-label>
          <input matInput type="number" formControlName="quantity">
        </mat-form-field>

        <div class="total-display">
          <strong>Total:</strong>
          <span>{{ transportTotal | currency:'PEN':'symbol':'1.2-2' }}</span>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Card 2: Almacenamiento -->
    <mat-card>
      <mat-card-title>Costos de Almacenamiento</mat-card-title>
      <mat-card-content>
        <mat-form-field appearance="outline">
          <mat-label>Días en almacén</mat-label>
          <input matInput type="number" formControlName="daysInStorage">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Costo diario</mat-label>
          <input matInput type="number" formControlName="dailyCost">
        </mat-form-field>

        <div class="total-display">
          <strong>Total:</strong>
          <span>{{ storageTotal | currency:'PEN':'symbol':'1.2-2' }}</span>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Card 3: Procesamiento -->
    <mat-card>
      <mat-card-title>Costos de Procesamiento</mat-card-title>
      <mat-card-content>
        <mat-form-field appearance="outline">
          <mat-label>Energía eléctrica</mat-label>
          <input matInput type="number" formControlName="electricity">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Mantenimiento de maquinaria</mat-label>
          <input matInput type="number" formControlName="maintenance">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Insumos de procesamiento</mat-label>
          <input matInput type="number" formControlName="supplies">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Agua utilizada</mat-label>
          <input matInput type="number" formControlName="water">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Depreciación en equipos</mat-label>
          <input matInput type="number" formControlName="depreciation">
        </mat-form-field>
      </mat-card-content>
    </mat-card>

    <!-- Card 4: Otros costos -->
    <mat-card>
      <mat-card-title>Otros Costos Indirectos</mat-card-title>
      <mat-card-content>
        <mat-form-field appearance="outline">
          <mat-label>Control de calidad</mat-label>
          <input matInput type="number" formControlName="qualityControl">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Certificaciones</mat-label>
          <input matInput type="number" formControlName="certifications">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Seguros</mat-label>
          <input matInput type="number" formControlName="insurance">
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Gastos administrativos</mat-label>
          <input matInput type="number" formControlName="administrative">
        </mat-form-field>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Botones de acción -->
  <div class="button-row">
    <button mat-button (click)="onCancel?.()">Cancelar</button>
  </div>
</div>
