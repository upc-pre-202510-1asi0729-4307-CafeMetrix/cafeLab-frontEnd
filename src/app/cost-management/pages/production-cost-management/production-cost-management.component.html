<app-toolbar></app-toolbar>

<div class="main-container">
  <!-- Success Message -->
  <div *ngIf="isSuccess" class="success-screen">
    <div class="success-message">
      <h2>¡Registro guardado exitosamente!</h2>
      <p class="registration-code">Código de registro: {{ registrationCode }}</p>
    </div>

    <div class="success-content">
      <!-- Metrics -->
      <app-metrics-card
        [costPerKg]="costPerKg"
        [potentialMargin]="potentialMargin"
        [suggestedPrice]="suggestedPrice">
      </app-metrics-card>

      <!-- Recommendations -->
      <app-recommendations-card [recommendations]="recommendations"></app-recommendations-card>
    </div>

    <!-- Action Buttons -->
    <div class="button-container">
      <button mat-raised-button class="action-button" (click)="onExit()">
        Salir
      </button>
      <button mat-raised-button class="action-button" (click)="onPrint()">
        Imprimir reporte
      </button>
    </div>
  </div>

  <!-- TODO: Stepper & Form logic (sin cambios) -->
  <div *ngIf="!isSuccess">
    <mat-stepper linear [selectedIndex]="currentStep">
      <mat-step [stepControl]="firstFormGroup">
        <ng-template matStepLabel>Selección de lote</ng-template>

        <app-step-lot-selection
          [formGroup]="firstFormGroup"
          [progressValue]="progressValue"
          [onCancel]="onCancel">
        </app-step-lot-selection>
      </mat-step>
      <mat-step [stepControl]="firstFormGroup">
        <ng-template matStepLabel>Costos directos</ng-template>
        <app-step-direct-costs
          [formGroup]="firstFormGroup"
          [progressValue]="progressValue"
          [onCancel]="onCancel">
        </app-step-direct-costs>
      </mat-step>
    </mat-stepper>
    <mat-stepper (selectionChange)="currentStep = $event.selectedIndex">
      <!-- Todo el código del stepper permanece igual -->
    </mat-stepper>
  </div>
</div>
