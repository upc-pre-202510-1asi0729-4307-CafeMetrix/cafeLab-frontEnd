<mat-toolbar color="primary">
  <app-toolbar/>

</mat-toolbar>

<!-- Reserva espacio para el navbar -->
<div style="height: 60px;"></div>

<div class="container">
  <!-- Breadcrumb -->
  <div class="breadcrumb" *ngIf="!isLoading && !error">
    <a routerLink="/dashboard">{{ 'NAVIGATION.HOME' | translate }}</a> &gt;
    <a [routerLink]="getNavigationPath()">{{ getNavigationText() | translate }}</a> &gt;
    <span>{{ recipe?.name }}</span>
  </div>

  <!-- Loading state -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner></mat-spinner>
  </div>

  <!-- Error state -->
  <div *ngIf="error" class="error-container">
    <mat-icon color="warn">error</mat-icon>
    <p>{{ 'recipes.detail.error_loading' | translate }}</p>
    <button mat-raised-button color="primary" [routerLink]="getNavigationPath()">
      {{ 'recipes.detail.back' | translate }}
    </button>
  </div>

  <!-- Recipe details -->
  <div class="recipe-detail" *ngIf="!isLoading && !error && recipe">
    <mat-card class="recipe-card">
      <!-- Header -->
      <div class="recipe-header">
        <img [src]="recipe.image" [alt]="recipe.name" class="recipe-image">
        <div class="recipe-title">
          <h1>{{ recipe.name }}</h1>
          <p class="extraction-method">
            {{ 'recipes.creation.extraction_methods.' + recipe.extractionMethod | translate }}
            <span *ngIf="recipe.extractionMethod === 'coffee'">
              - {{ 'recipes.creation.extraction_methods.' + (recipe.extractionMethod || 'pour-over') | translate }}
            </span>
          </p>
        </div>
      </div>

      <mat-divider></mat-divider>

      <!-- Detalles básicos -->
      <div class="recipe-info">
        <div class="info-section">
          <h2>{{ 'recipes.detail.basic_info' | translate }}</h2>
          <div class="info-grid">
            <div class="info-item" *ngIf="recipe.lote">
              <span class="label">{{ 'recipes.creation.lote' | translate }}:</span>
              <span>{{ recipe.lote }}</span>
            </div>
            <div class="info-item" *ngIf="recipe.tueste">
              <span class="label">{{ 'recipes.creation.tueste' | translate }}:</span>
              <span>{{ recipe.tueste }}</span>
            </div>
            <div class="info-item" *ngIf="recipe.cata">
              <span class="label">{{ 'recipes.creation.cata' | translate }}:</span>
              <span>{{ recipe.cata }}</span>
            </div>
            <div class="info-item" *ngIf="recipe.molienda">
              <span class="label">{{ 'recipes.creation.molienda' | translate }}:</span>
              <span>{{ recipe.molienda }}</span>
            </div>
            <div class="info-item" *ngIf="recipe.ratio">
              <span class="label">{{ 'recipes.creation.ratio' | translate }}:</span>
              <span>{{ recipe.ratio }}</span>
            </div>
            <div class="info-item" *ngIf="recipe.preparationTime">
              <span class="label">{{ 'recipes.creation.tiempo' | translate }}:</span>
              <span>{{ recipe.preparationTime }}</span>
            </div>
          </div>
        </div>

        <!-- Ingredientes -->
        <div class="info-section">
          <h2>{{ 'recipes.creation.ingredientes' | translate }}</h2>
          <mat-list>
            <mat-list-item *ngFor="let ingredient of recipe.ingredients">
              <span matListItemTitle>{{ ingredient.name }}</span>
              <span matListItemLine>{{ ingredient.amount }} {{ ingredient.unit }}</span>
            </mat-list-item>
          </mat-list>
        </div>

        <!-- Pasos -->
        <div class="info-section" *ngIf="recipe.steps">
          <h2>{{ 'recipes.creation.pasos' | translate }}</h2>
          <p class="steps-text">{{ recipe.steps }}</p>
        </div>

        <!-- Consejos -->
        <div class="info-section" *ngIf="recipe.tips">
          <h2>{{ 'recipes.creation.consejos' | translate }}</h2>
          <p class="tips-text">{{ recipe.tips }}</p>
        </div>

        <!-- Fecha de creación -->
        <div class="creation-date">
          {{ 'recipes.detail.created_at' | translate }}: {{ recipe.createdAt | date }}
        </div>
      </div>
    </mat-card>
  </div>
</div>
